<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>群星（Stellaris）帝国编年史生成器</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 动态星空背景画布 -->
    <canvas id="starfield"></canvas>
    <!-- 细微扫描线与噪点覆盖层 -->
    <div class="fx-overlay"></div>
    <div class="scanlines"></div>
    <div class="container">
        <!-- 头部标题 -->
        <header class="header">
            <h1 class="glitch" data-text="STELLARIS CHRONICLE">群星（Stellaris）帝国编年史生成器</h1>
            <p class="subtitle">在线版本 v1.0 · 纯前端 | <a href="https://github.com/luyu14039/Stellaris-Empire-Chronicle-Generator" target="_blank">GitHub</a></p>
            <div class="header-actions">
                <button id="themeToggle" class="btn btn-ghost" title="切换主题">🌗 主题</button>
                <button id="fxToggle" class="btn btn-ghost" title="切换特效">✨ 特效</button>
            </div>
        </header>

        <!-- 主内容区 -->
        <div class="main-content">
            <!-- 左侧配置面板 -->
            <div class="left-panel">
                <div class="section">
                    <h3>1. 选择存档文件 (.txt)</h3>
                    <div class="file-input-row">
                        <input type="file" id="saveFileInput" accept=".txt" class="file-input">
                        <label for="saveFileInput" class="file-label">选择文件</label>
                        <span id="fileName" class="file-name">未选择文件</span>
                    </div>
                    <p class="hint">请选择从Stellaris导出的存档文本文件</p>
                </div>

                <div class="section">
                    <h3>2. 内容生成模式</h3>
                    <div class="generation-mode">
                        <label class="radio-label">
                            <input type="radio" name="generationMode" value="random" id="randomMode" checked>
                            随机生成（帝国名称 + 星神兽种类）
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="generationMode" value="manual" id="manualMode">
                            手动输入（解析后引导填写）
                        </label>
                    </div>
                </div>

                <div class="section" id="empireNameSection">
                    <h3>3. 玩家帝国名称（可选）</h3>
                    <input type="text" id="empireNameInput" placeholder="留空将随机生成或显示为 '玩家帝国'" class="text-input">
                </div>

                <div class="section">
                    <h3>4. 选项</h3>
                    <label class="checkbox-label">
                        <input type="checkbox" id="includeYearMarkers" checked>
                        生成年度标记
                    </label>
                </div>

                <!-- 手动输入引导界面 -->
                <div class="section" id="manualInputSection" style="display: none;">
                    <h3 class="collapsible-header" id="manualInputHeader">
                        <span class="header-icon">📋</span>
                        5. 手动输入引导
                        <span class="collapse-icon">▼</span>
                    </h3>
                    <div id="inputGuideContent" class="input-guide collapsible-content">
                        <p class="guide-hint">请先开始解析，系统将分析需要填写的内容</p>
                    </div>
                </div>

                <div class="section">
                    <h3 id="operationTitle">5. 操作</h3>
                    <div class="button-row">
                        <button id="generateBtn" class="btn btn-primary" disabled data-glow>开始生成</button>
                        <button id="downloadBtn" class="btn btn-secondary" disabled>下载结果</button>
                        <button id="clearLogBtn" class="btn btn-secondary">清空日志</button>
                    </div>
                </div>

                <div class="status">
                    <span id="statusText">状态: 就绪</span>
                </div>
            </div>

            <!-- 右侧结果面板 -->
            <div class="right-panel">
                <div class="progress-section holo-panel">
                    <div class="progress-bar spectral">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <span id="progressText" class="mono">就绪</span>
                </div>

                <div class="log-section">
                    <div class="log-header">
                        <h3>运行状态 / 日志</h3>
                        <input type="text" id="searchInput" placeholder="搜索关键字..." class="search-input">
                    </div>
                    <div id="logOutput" class="log-output holo-panel"></div>
                </div>

                <div class="result-section holo-panel" id="resultSection" style="display: none;">
                    <div class="result-tabs">
                        <button class="tab-btn active" data-tab="text">📝 文本版</button>
                        <button class="tab-btn" data-tab="timeline">📊 时间轴</button>
                    </div>
                    <div class="tab-content active" id="textContent">
                        <pre id="chronicleOutput" class="chronicle-output"></pre>
                    </div>
                    <div class="tab-content" id="timelineContent">
                        <div id="timelineVisualization" class="timeline-container"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部信息 -->
        <footer class="footer">
            <p>
                启动时间: <span id="startTime"></span> | 
                在线版本 v1.0 | 
                <a href="https://github.com/luyu14039/Stellaris-Empire-Chronicle-Generator" target="_blank">项目主页</a>
            </p>
            <p class="footer-hint">
                提示: 本版本为纯前端实现，所有解析均在浏览器中完成。如有问题请在GitHub提交Issue。
            </p>
        </footer>
    </div>

    <script src="main.js"></script>
    <script>
        // 设置启动时间
        document.getElementById('startTime').textContent = new Date().toLocaleString('zh-CN');
    </script>
</body>
</html>